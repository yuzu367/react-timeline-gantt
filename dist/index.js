!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("moment"),require("react-sizeme")):"function"==typeof define&&define.amd?define("react-gantt-timeline",["React","moment","ReactDOM"],e):"object"==typeof exports?exports["react-gantt-timeline"]=e(require("react"),require("moment"),require("react-sizeme")):t["react-gantt-timeline"]=e(t.React,t.moment,t.ReactDOM)}(window,function(t,e,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){t.exports=n(11)()},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=r.sources.map(function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")});return[n].concat(i).concat([o]).join("\n")}var a,s,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n}).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<t.length;s++){var c=[].concat(t[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,u=0,l=[],p=n(8);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(v(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(v(r.parts[a],e));i[r.id]={id:r.id,refs:1,parts:s}}}}function d(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],a=e.base?i[0]+e.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function h(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),b(e,t.attrs),h(t,e),e}function b(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function v(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var a=u++;n=c||(c=m(e)),r=k.bind(null,n,a,!1),o=k.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),h(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=p(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),o=function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){y(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=d(t,e);return f(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}t&&f(d(t,e),e);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var g,w=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function k(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}},function(t,e){t.exports=n},function(t,e,n){var r=n(7);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(3)(!1)).push([t.i,".header-top {\n  height: 20px;\n\n  border-bottom: solid 0.5px silver;\n}\n\n.header-middle {\n  height: 20px;\n  background-color: chocolate;\n  color: white;\n  font-size: 10px;\n  border-bottom: solid 0.5px silver;\n}\n.header-bottom {\n  height: 20px;\n  font-size: 10px;\n  border-bottom: solid 0.5px silver;\n}\n",""]),t.exports=e},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){var r=n(10);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(4)(r,o);r.locals&&(t.exports=r.locals)},function(t,e,n){(e=n(3)(!1)).push([t.i,".timeLine {\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 100%;\n  border: solid 1px rgb(207, 207, 205);\n  font-size: 12px;\n  user-select: none;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n}\n\n/* Main Area */\n\n.timeLine-main {\n  flex: 1 1 100%;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  overflow-y: hidden;\n}\n/* Main Area Header*/\n\n.timeLine-main-header-viewPort {\n  flex: 0 0 60px;\n  position: relative;\n  height: 60px;\n  width: 100%;\n  background-color: rgb(112, 112, 112);\n  overflow: hidden;\n}\n\n.timeLine-main-header-container {\n  flex: 0 0 60px;\n  position: relative;\n  top: 0;\n  left: 0;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: #333333;\n  overflow: hidden;\n  user-select: none;\n}\n\n.timeLine-main-header-day-item {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-color: rgb(112, 112, 112);\n  font-size: 10px;\n  text-align: center;\n  border-right: solid 1px;\n  border-top: solid 1px;\n  border-bottom: solid 1px;\n  top: 20px;\n  height: 40px;\n  color: white;\n  text-align: center;\n}\n\n.timeLine-main-header-top-item {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  border-right: solid 1px white;\n  height: 20px;\n  z-index: 91;\n}\n\n.timeLine-main-header-day-week {\n  flex: 0 0 12px;\n  padding: 4px;\n  z-index: 90;\n}\n\n.timeLine-main-header-day-month {\n  top: 0px;\n  position: sticky;\n  flex: 0 0 15px;\n  padding: 5px;\n  z-index: 90;\n}\n\n.timeLine-main-header-time {\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  height: 22px;\n  justify-content: stretch;\n}\n\n.timeLine-main-header-time-item {\n  border-left: solid 1px silver;\n  border-bottom: solid 1px silver;\n  border-top: solid 1px silver;\n  text-align: center;\n  padding-top: 5px;\n}\n/* Main Area Data*/\n\n.timeLine-main-data-viewPort {\n  flex: 1 1 auto;\n  position: relative;\n  overflow: hidden;\n  background-color: #fbf9f9;\n}\n.timeLine-main-data-container {\n  position: relative;\n  top: 0;\n  left: 0;\n  height: 100%;\n  background-color: rgb(255, 255, 255);\n}\n\n.timeLine-main-data-row {\n  position: absolute;\n  width: 100%;\n  height: 50px;\n}\n\n.timeLine-main-data-task {\n  position: absolute;\n  background-color: darkorchid;\n  border-radius: 14px;\n  color: white;\n  text-align: center;\n}\n\n.timeLine-main-data-task-side {\n  position: absolute;\n  width: 10px;\n  cursor: col-resize;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.timeLine-main-data-task-side-linker {\n  width: 8px;\n  height: 8px;\n  border-radius: 4px;\n  cursor: default;\n  z-index: 100;\n}\n.timeLine-main-data-task-side-linker:hover {\n  background-color: black;\n  border: solid 0.5px grey;\n}\n/* .timeLine-main-data-task:hover {\n    background-color:chocolate;\n    border:solid 2px darkorchid;\n    cursor: move;\n} */\n\n.timeLine-main-data-verticalLine {\n  flex: 1 1 auto;\n  height: 100%;\n  width: 24px;\n  background-color: white;\n  border-left-width: 0.5px;\n  border-left-color: rgb(207, 207, 205);\n  border-left-style: dashed;\n}\n\n/* Side Area */\n\n.timeLine-side-main {\n  flex: 0 0 auto;\n  width: 108px;\n  min-width: 108px;\n  display: flex;\n  flex-direction: row;\n}\n\n.timeLine-side {\n  flex: 1 0 100px;\n  display: flex;\n  flex-direction: column;\n  border-right: solid 1px rgb(207, 207, 205);\n}\n\n.verticalResizer {\n  flex: 0 0 8px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  cursor: col-resize;\n  border-right: solid 1px rgb(207, 207, 205);\n  height: 100%;\n}\n.squareGrip {\n  flex: 0 0 auto;\n\n  border-radius: 50%;\n  height: 5px;\n  width: 5px;\n  margin: 3px 0;\n}\n\n.timeLine-side-title {\n  flex: 0 0 60px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.timeLine-side-task-viewPort {\n  position: relative;\n  flex: 1 1 auto;\n  height: 100%;\n  background-color: #fbf9f9;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n\n.timeLine-side-task-container {\n  position: relative;\n  overflow-x: hidden;\n  overflow-y: hidden;\n}\n\n.timeLine-side-task-row {\n  position: absolute;\n  width: 100%;\n  background-color: rgb(112, 112, 112);\n  border-bottom-width: 0.5px;\n  border-bottom-color: rgb(207, 207, 205);\n  border-bottom-style: solid;\n  height: 30px;\n  color: grey;\n  text-align: center;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  outline: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n}\n",""]),t.exports=e},function(t,e,n){"use strict";var r=n(12);function o(){}function i(){}i.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(2),a=n.n(i);function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==s(e)?e:e+""}var l={header:{top:{style:{backgroundColor:"#333333",fontSize:10,color:"white",textAlign:"center"}},middle:{style:{backgroundColor:"chocolate"},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}},bottom:{style:{background:"grey",color:"white",fontSize:9},selectedStyle:{backgroundColor:"#b13525",fontWeight:"bold"}}},taskList:{title:{label:"Projects",style:{backgroundColor:"#333333",borderBottom:"solid 1px silver",color:"white",textAlign:"center"}},task:{style:{backgroundColor:"#fbf9f9"}},verticalSeparator:{style:{backgroundColor:"#333333"},grip:{style:{backgroundColor:"#cfcfcd"}}}},dataViewPort:{rows:{style:{backgroundColor:"#fbf9f9",borderBottom:"solid 0.5px #cfcfcd"}},task:{showLabel:!1,style:{position:"absolute",borderRadius:14,color:"white",textAlign:"center",backgroundColor:"grey"},selectedStyle:{position:"absolute",borderRadius:14,border:"solid 1px #ff00fa",color:"white",textAlign:"center",backgroundColor:"grey"}}},links:{color:"black",selectedColor:"#ff00fa"}},p=new(function(){return t=function t(){var e,n,r,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=this,r=function(t){o.data={},t?o.populate(t,l,o.data):o.data=l},(n=u(n="load"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this.data=l},(e=[{key:"populate",value:function(t,e,n){if(this.isObject(e))for(var r in e)t[r]?(n[r]=t[r],this.populate(t[r],e[r],n[r])):n[r]=e[r]}},{key:"isObject",value:function(t){return"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t}},{key:"values",get:function(){return this.data}}])&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}());function f(t){"@babel/helpers - typeof";return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function h(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f(e)?e:e+""}function y(t,e,n){return e=m(e),function(t,e){if(e&&("object"==f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],m(t).constructor):e.apply(t,n))}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var v=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=y(this,e,[t])).doMouseMove=n.doMouseMove.bind(n),n.doMouseDown=n.doMouseDown.bind(n),n.doMouseUp=n.doMouseUp.bind(n),n.state={dragging:!1},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(e,r["Component"]),n=e,(i=[{key:"doMouseDown",value:function(t){0===t.button&&(this.draggingPosition=t.clientX,this.setState({dragging:!0}))}},{key:"componentDidUpdate",value:function(t,e){this.state.dragging&&!e.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)):!this.state.dragging&&e.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp))}},{key:"doMouseMove",value:function(t){if(this.state.dragging){t.stopPropagation();var e=this.draggingPosition-t.clientX;this.draggingPosition=t.clientX,this.props.onTaskListSizing(e)}}},{key:"doMouseUp",value:function(t){this.setState({dragging:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"verticalResizer",style:p.values.taskList.verticalSeparator.style,onMouseDown:this.doMouseDown},o.a.createElement("div",{className:"squareGrip",style:p.values.taskList.verticalSeparator.grip.style}),o.a.createElement("div",{className:"squareGrip",style:p.values.taskList.verticalSeparator.grip.style}),o.a.createElement("div",{className:"squareGrip",style:p.values.taskList.verticalSeparator.grip.style}),o.a.createElement("div",{className:"squareGrip",style:p.values.taskList.verticalSeparator.grip.style}))}}])&&d(n.prototype,i),a&&d(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(),g=n(1),w=n.n(g),k=0,O=30,S=5e3,j="day",P="week",x="month",T="year";function E(t){"@babel/helpers - typeof";return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M(r.key),r)}}function C(t,e,n){return(e=M(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t){var e=function(t,e){if("object"!=E(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==E(e)?e:e+""}var R=new(function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,"dayToPosition",function(t,e,n){return t*n+e}),C(this,"daysInYear",function(t){return e.isLeapYear(t)?366:365})},(e=[{key:"dateToPixel",value:function(t,e,n){var r=this.getToday(),o=new Date(t),i=60*(o.getTimezoneOffset()-r.getTimezoneOffset())*1e3;return(o.getTime()-r.getTime()-i)/36e5*(n/24)+e}},{key:"pixelToDate",value:function(t,e,n){var r=24/n,o=t-e,i=this.getToday(),a=i.getTime()+o*r*36e5,s=new Date(a),c=60*(s.getTimezoneOffset()-i.getTimezoneOffset())*1e3;return s.setTime(s.getTime()+c),s}},{key:"getToday",value:function(){var t=new Date;return t.setHours(0,0,0,0),t}},{key:"monthDiff",value:function(t,e){return Math.abs(e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()))}},{key:"daysInMonth",value:function(t,e){return new Date(e,t,0).getDate()}},{key:"isLeapYear",value:function(t){return t%400==0||t%100!=0&&t%4==0}}])&&L(t.prototype,e),n&&L(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}());n(6);function D(t){"@babel/helpers - typeof";return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach(function(e){N(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function N(t,e,n){return(e=B(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B(r.key),r)}}function W(t,e,n){return e&&z(t.prototype,e),n&&z(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function B(t){var e=function(t,e){if("object"!=D(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==D(e)?e:e+""}function V(t,e,n){return e=A(e),function(t,e){if(e&&("object"==D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],A(t).constructor):e.apply(t,n))}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}function H(t,e){return(H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var Y=function(t){function e(t){return U(this,e),V(this,e,[t])}return F(e,r["PureComponent"]),W(e,[{key:"render",value:function(){return o.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",borderLeft:"solid 1px white",position:"absolute",height:20,left:this.props.left,width:this.props.width}},o.a.createElement("div",null,this.props.label))}}])}(),X=function(t){function e(t){var n;return U(this,e),N(n=V(this,e,[t]),"getStartDate",function(t,e){var n=null;switch(e){case"year":return n=t.year(),w()([n,0,1]);case"month":n=t.year();var r=t.month();return w()([n,r,1]);case"week":return t.subtract(t.day(),"days");default:return t}}),N(n,"renderTime",function(t,e,n,r){for(var i=[],a=e/24,s=0,c=0;c<24;c++)i.push(o.a.createElement(Y,{key:c,left:s,width:a,label:"shorttime"==n?c:"".concat(c,":00")})),s+=a;return o.a.createElement("div",{key:r,style:{position:"absolute",height:20,left:t,width:e}}," ",i)}),N(n,"renderHeaderRows",function(t,e,r){for(var i={top:[],middle:[],bottom:[]},a={},s="",c="",u="",l=null,f=null,d=n.props.currentday,h=n.props.currentday+n.props.numVisibleDays,y=d-O;y<h+O;y++)s!=(l=w()().add(y,"days")).format(n.getFormat(t,"top"))&&(s=l.format(n.getFormat(t,"top")),f=n.getBox(l,t,a.top),a.top=f.left+f.width,i.top.push(o.a.createElement(Y,{key:y,left:f.left,width:f.width,label:s}))),c!=l.format(n.getFormat(e))&&(c=l.format(n.getFormat(e)),f=n.getBox(l,e,a.middle),a.middle=f.left+f.width,i.middle.push(o.a.createElement(Y,{key:y,left:f.left,width:f.width,label:c}))),u!=l.format(n.getFormat(r))&&(u=l.format(n.getFormat(r)),f=n.getBox(l,r,a.bottom),a.bottom=f.left+f.width,"shorttime"==r||"fulltime"==r?i.bottom.push(n.renderTime(f.left,f.width,r,y)):i.bottom.push(o.a.createElement(Y,{key:y,left:f.left,width:f.width,label:u})));return o.a.createElement("div",{className:"timeLine-main-header-container",style:{width:S,maxWidth:S}},o.a.createElement("div",{className:"header-top",style:I({},p.values.header.top.style)},i.top),o.a.createElement("div",{className:"header-middle",style:I({},p.values.header.middle.style)},i.middle),o.a.createElement("div",{className:"header-bottom",style:I({},p.values.header.bottom.style)},i.bottom))}),N(n,"renderHeader",function(){switch(n.props.mode){case j:return n.renderHeaderRows("week","dayweek","fulltime");case P:return n.renderHeaderRows("week","dayweek","shorttime");case x:return n.renderHeaderRows("month","dayweek","daymonth");case T:return n.renderHeaderRows("year","month","week")}}),N(n,"setBoundaries",function(){n.start=n.props.currentday-O,n.end=n.props.currentday+n.props.numVisibleDays+O}),N(n,"needToRender",function(){return n.props.currentday<n.start||n.props.currentday+n.props.numVisibleDays>n.end}),n.setBoundaries(),n.HeaderRef=o.a.createRef(),n}return F(e,r["PureComponent"]),W(e,[{key:"getFormat",value:function(t,e){switch(t){case"year":return"YYYY";case"month":return"top"==e?"MMMM YYYY":"MMMM";case"week":return"top"==e?"ww MMMM YYYY":"ww";case"dayweek":return"dd";case"daymonth":return"D"}}},{key:"getModeIncrement",value:function(t,e){switch(e){case"year":return R.daysInYear(t.year());case"month":return t.daysInMonth();case"week":return 7;default:return 1}}},{key:"getBox",value:function(t,e,n){var r=this.getModeIncrement(t,e)*this.props.dayWidth;if(!n){var o=this.getStartDate(t,e);o=o.startOf("day");var i=w()().startOf("day"),a=o.diff(i,"days");n=R.dayToPosition(a,this.props.nowposition,this.props.dayWidth)}return{left:n,width:r}}},{key:"render",value:function(){return this.HeaderRef.current&&(this.HeaderRef.current.scrollLeft=this.props.scrollLeft),o.a.createElement("div",{id:"timeline-header",ref:this.HeaderRef,className:"timeLine-main-header-viewPort"},this.renderHeader())}}])}();function q(t){"@babel/helpers - typeof";return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach(function(e){tt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,et(r.key),r)}}function J(t,e,n){return e=Q(e),function(t,e){if(e&&("object"==q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Q(t).constructor):e.apply(t,n))}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t,e){return(Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tt(t,e,n){return(e=et(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function et(t){var e=function(t,e){if("object"!=q(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==q(e)?e:e+""}var nt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),tt(n=J(this,e,[t]),"onCreateLinkMouseDown",function(t,e){0===t.button&&(t.stopPropagation(),n.props.onStartCreateLink(n.props.item,e))}),tt(n,"onCreateLinkMouseUp",function(t,e){t.stopPropagation(),n.props.onFinishCreateLink(n.props.item,e)}),tt(n,"onCreateLinkTouchStart",function(t,e){t.stopPropagation(),n.props.onStartCreateLink(n.props.item,e)}),tt(n,"onCreateLinkTouchEnd",function(t,e){t.stopPropagation(),n.props.onFinishCreateLink(n.props.item,e)}),tt(n,"doMouseDown",function(t,e){n.props.onUpdateTask&&0===t.button&&(t.stopPropagation(),n.dragStart(t.clientX,e))}),tt(n,"doMouseMove",function(t){n.state.dragging&&(t.stopPropagation(),n.dragProcess(t.clientX))}),tt(n,"doMouseUp",function(){n.dragEnd()}),tt(n,"doTouchStart",function(t,e){n.props.onUpdateTask&&(t.stopPropagation(),n.dragStart(t.touches[0].clientX,e))}),tt(n,"doTouchMove",function(t){n.state.dragging&&(t.stopPropagation(),n.dragProcess(t.changedTouches[0].clientX))}),tt(n,"doTouchEnd",function(t){n.dragEnd()}),n.calculateStyle=n.calculateStyle.bind(n),n.state={dragging:!1,left:n.props.left,width:n.props.width,mode:k},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z(t,e)}(e,r["Component"]),n=e,(i=[{key:"componentDidUpdate",value:function(t,e){this.state.dragging&&!e.dragging?(document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp),document.addEventListener("touchmove",this.doTouchMove),document.addEventListener("touchend",this.doTouchEnd)):!this.state.dragging&&e.dragging&&(document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp),document.removeEventListener("touchmove",this.doTouchMove),document.removeEventListener("touchend",this.doTouchEnd))}},{key:"dragStart",value:function(t,e){this.props.onChildDrag(!0),this.draggingPosition=t,this.setState({dragging:!0,mode:e,left:this.props.left,width:this.props.width})}},{key:"dragProcess",value:function(t){var e=this.draggingPosition-t,n=this.state.left,r=this.state.width;switch(this.state.mode){case 1:n=this.state.left-e;break;case 2:n=this.state.left-e,r=this.state.width+e;break;case 3:r=this.state.width-e}var o={item:this.props.item,position:{start:n-this.props.nowposition,end:n+r-this.props.nowposition}};this.props.onTaskChanging(o),this.setState({left:n,width:r}),this.draggingPosition=t}},{key:"dragEnd",value:function(){this.props.onChildDrag(!1);var t=R.pixelToDate(this.state.left,this.props.nowposition,this.props.dayWidth),e=R.pixelToDate(this.state.left+this.state.width,this.props.nowposition,this.props.dayWidth);this.props.onUpdateTask(this.props.item,{start:t,end:e}),this.setState({dragging:!1,mode:k})}},{key:"calculateStyle",value:function(){var t=this.props.isSelected?p.values.dataViewPort.task.selectedStyle:p.values.dataViewPort.task.style,e=this.props.color?this.props.color:t.backgroundColor;return this.state.dragging?K(K({},t),{},{backgroundColor:e,left:this.state.left,width:this.state.width,height:this.props.height-5,top:2}):K(K({},t),{},{backgroundColor:e,left:this.props.left,width:this.props.width,height:this.props.height-5,top:2})}},{key:"render",value:function(){var t=this,e=this.calculateStyle();return o.a.createElement("div",{onMouseDown:function(e){return t.doMouseDown(e,1)},onTouchStart:function(e){return t.doTouchStart(e,1)},onClick:function(e){t.props.onSelectItem(t.props.item)},style:e},o.a.createElement("div",{className:"timeLine-main-data-task-side",style:{top:0,left:-4,height:e.height},onMouseDown:function(e){return t.doMouseDown(e,2)},onTouchStart:function(e){return t.doTouchStart(e,2)}},o.a.createElement("div",{className:"timeLine-main-data-task-side-linker",onMouseUp:function(e){return t.onCreateLinkMouseUp(e,void 0)},onTouchEnd:function(e){return t.onCreateLinkTouchEnd(e,void 0)}})),o.a.createElement("div",{style:{overflow:"hidden"}},p.values.dataViewPort.task.showLabel?this.props.item.name:""),o.a.createElement("div",{className:"timeLine-main-data-task-side",style:{top:0,left:e.width-3,height:e.height},onMouseDown:function(e){return t.doMouseDown(e,3)},onTouchStart:function(e){return t.doTouchStart(e,3)}},o.a.createElement("div",{className:"timeLine-main-data-task-side-linker",onMouseDown:function(e){return t.onCreateLinkMouseDown(e,"LINK_POS_RIGHT")},onTouchStart:function(e){return t.onCreateLinkTouchStart(e,"LINK_POS_RIGHT")}})))}}])&&$(n.prototype,i),a&&$(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(),rt=n(5),ot=n.n(rt);function it(t){"@babel/helpers - typeof";return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,st(r.key),r)}}function st(t){var e=function(t,e){if("object"!=it(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=it(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==it(e)?e:e+""}var ct=new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data={},this.link={}},(e=[{key:"registerData",value:function(t){var e=this;if(t){this.data={};var n=this.groupData(t,0,t.length);Object.values(n).forEach(function(t,n){t.forEach(function(t){e.data[t.id]={item:t,index:n}})})}}},{key:"registerLinks",value:function(t){if(t){this.link={};for(var e=0,n=0,r=0;r<t.length;r++){e=t[r].start,n=t[r].end;var o={link:t[r],index:r};this.createAddTo(e,this.link,o,r),this.createAddTo(n,this.link,o,r)}}}},{key:"createAddTo",value:function(t,e,n,r){e[t]||(e[t]=[]),-1==e[t].indexOf(n)&&e[t].push(n)}},{key:"getTask",value:function(t){return this.data[t]}},{key:"getLinks",value:function(t){return this.link[t]}},{key:"groupData",value:function(t,e,n){for(var r={},o=e;o<n;o++){var i=t[o];if(!i)break;var a=void 0!==i.groupName?i.groupName:i.id;void 0!==r[a]?r[a].push(i):r[a]=[i]}return r}}])&&at(t.prototype,e),n&&at(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}());function ut(t){"@babel/helpers - typeof";return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(n),!0).forEach(function(e){ft(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ft(t,e,n){return(e=mt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mt(r.key),r)}}function yt(t,e,n){return e&&ht(t.prototype,e),n&&ht(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mt(t){var e=function(t,e){if("object"!=ut(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ut(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ut(e)?e:e+""}function bt(t,e,n){return e=vt(e),function(t,e){if(e&&("object"==ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],vt(t).constructor):e.apply(t,n))}function vt(t){return(vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}function wt(t,e){return(wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var kt=function(t){function e(t){return dt(this,e),bt(this,e,[t])}return gt(e,r["Component"]),yt(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"timeLine-main-data-row",style:pt(pt({},p.values.dataViewPort.rows.style),{},{top:this.props.top,height:this.props.itemheight})},this.props.children)}}])}(),Ot=function(t){function e(t){var n;return dt(this,e),ft(n=bt(this,e,[t]),"onChildDrag",function(t){n.childDragging=t}),ft(n,"renderRows",function(){var t=[],e=ct.groupData(n.props.data,n.props.startRow,n.props.endRow+1);return Object.keys(e).forEach(function(r,i){var a=e[r];t.push(o.a.createElement(kt,{key:r,label:r,top:i*n.props.itemheight,left:20,itemheight:n.props.itemheight},a.map(function(t){var e=R.dateToPixel(t.start,n.props.nowposition,n.props.dayWidth),r=R.dateToPixel(t.end,n.props.nowposition,n.props.dayWidth)-e;return o.a.createElement(nt,{key:t.id,item:t,label:t.name,nowposition:n.props.nowposition,dayWidth:n.props.dayWidth,color:t.color,left:e,width:r,height:n.props.itemheight,onChildDrag:n.onChildDrag,isSelected:n.props.selectedItem==t,onSelectItem:n.props.onSelectItem,onStartCreateLink:n.props.onStartCreateLink,onFinishCreateLink:n.props.onFinishCreateLink,onTaskChanging:n.props.onTaskChanging,onUpdateTask:n.props.onUpdateTask}," ")})))}),t}),ft(n,"doMouseDown",function(t){0!==t.button||n.childDragging||n.props.onMouseDown(t)}),ft(n,"doMouseMove",function(t){n.props.onMouseMove(t,n.dataViewPortRef.current)}),ft(n,"doTouchStart",function(t){n.childDragging||n.props.onTouchStart(t)}),ft(n,"doTouchMove",function(t){n.props.onTouchMove(t,n.dataViewPortRef.current)}),n.childDragging=!1,n.dataViewPortRef=o.a.createRef(),n}return gt(e,r["Component"]),yt(e,[{key:"getContainerHeight",value:function(t){return t>0?t*this.props.itemheight:10}},{key:"componentDidMount",value:function(){this.dataViewPortRef.current.scrollLeft=0}},{key:"render",value:function(){this.dataViewPortRef.current&&(this.dataViewPortRef.current.scrollLeft=this.props.scrollLeft,this.dataViewPortRef.current.scrollTop=this.props.scrollTop);var t=this.getContainerHeight(this.props.data.length);return o.a.createElement("div",{ref:this.dataViewPortRef,id:"timeLinedataViewPort",className:"timeLine-main-data-viewPort",onMouseDown:this.doMouseDown,onMouseMove:this.doMouseMove,onMouseUp:this.props.onMouseUp,onMouseLeave:this.props.onMouseLeave,onTouchStart:this.doTouchStart,onTouchMove:this.doTouchMove,onTouchEnd:this.props.onTouchEnd,onTouchCancel:this.props.onTouchCancel},o.a.createElement("div",{className:"timeLine-main-data-container",style:{height:t,width:S,maxWidth:S}},this.renderRows()))}}])}(),St=ot()({monitorWidth:!0,monitorHeight:!0})(Ot);function jt(t){"@babel/helpers - typeof";return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ct(r.key),r)}}function xt(t,e,n){return e=Tt(e),function(t,e){if(e&&("object"==jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Tt(t).constructor):e.apply(t,n))}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Et(t,e){return(Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lt(t,e,n){return(e=Ct(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ct(t){var e=function(t,e){if("object"!=jt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==jt(e)?e:e+""}var Mt=20,Rt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lt(n=xt(this,e,[t]),"calcNormCoordinates",function(){var t;return{cpt1:{x:t=n.props.start.x+(n.props.end.x-n.props.start.x)/2,y:n.props.start.y},cpt2:{x:t,y:n.props.end.y}}}),Lt(n,"calcSCoordinates",function(){var t={x:n.props.start.x+Mt,y:n.props.start.y},e=(n.props.end.y-n.props.start.y)/2,r={x:t.x,y:t.y+e},o={x:n.props.end.x-Mt,y:r.y};return{cpt1:t,cpt2:r,cpt3:o,cpt4:{x:o.x,y:o.y+e}}}),Lt(n,"getPath",function(){var t=null;return n.props.start.x>n.props.end.x?(t=n.calcSCoordinates(),"M".concat(n.props.start.x," ").concat(n.props.start.y,"  ").concat(t.cpt1.x," ").concat(t.cpt1.y," ").concat(t.cpt2.x," ").concat(t.cpt2.y," ").concat(t.cpt3.x," ").concat(t.cpt3.y," ").concat(t.cpt4.x," ").concat(t.cpt4.y," ").concat(n.props.end.x," ").concat(n.props.end.y)):(t=n.calcNormCoordinates(),"M".concat(n.props.start.x," ").concat(n.props.start.y,"  ").concat(t.cpt1.x," ").concat(t.cpt1.y," ").concat(t.cpt2.x," ").concat(t.cpt2.y," ").concat(n.props.end.x," ").concat(n.props.end.y))}),Lt(n,"onSelect",function(t){n.props.onSelectItem&&n.props.onSelectItem(n.props.item)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Et(t,e)}(e,r["Component"]),n=e,(i=[{key:"render",value:function(){var t=this.props.isSelected?p.values.links.selectedColor:p.values.links.color;return o.a.createElement("g",{className:"timeline-link"},o.a.createElement("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:"white",d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"4",cursor:"pointer"}),o.a.createElement("path",{pointerEvents:"stroke",onMouseDown:this.onSelect,stroke:t,d:this.getPath(),strokeLinejoin:"round",fill:"transparent",strokeWidth:"1",cursor:"pointer",markerEnd:"url(#arrow)"}))}}])&&Pt(n.prototype,i),a&&Pt(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}();function Dt(t){"@babel/helpers - typeof";return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wt(r.key),r)}}function It(t,e,n){return e=Nt(e),function(t,e){if(e&&("object"==Dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Nt(t).constructor):e.apply(t,n))}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ut(t,e){return(Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zt(t,e,n){return(e=Wt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wt(t){var e=function(t,e){if("object"!=Dt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Dt(e)?e:e+""}var Bt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zt(n=It(this,e,[t]),"doMouseMove",function(t){n.init||(n.lastX=t.clientX,n.lastY=t.clientY,n.init=!0);var e=n.state.x+(t.clientX-n.lastX),r=n.state.y+(t.clientY-n.lastY);n.lastX=t.clientX,n.lastY=t.clientY,n.setState({x:e,y:r})}),zt(n,"doMouseUp",function(t){n.props.onFinishCreateLink()}),n.state={x:n.props.start.x,y:n.props.start.y},n.init=!1,n.lastX=-1,n.lastY=-1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ut(t,e)}(e,r["Component"]),n=e,(i=[{key:"componentDidMount",value:function(){document.addEventListener("mousemove",this.doMouseMove),document.addEventListener("mouseup",this.doMouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.doMouseMove),document.removeEventListener("mouseup",this.doMouseUp)}},{key:"render",value:function(){return o.a.createElement(Rt,{key:-1,start:{x:this.props.start.x,y:this.props.start.y},end:{x:this.state.x,y:this.state.y}})}}])&&_t(n.prototype,i),a&&_t(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}();function Vt(t){"@babel/helpers - typeof";return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t){return function(t){if(Array.isArray(t))return Ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ft(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kt(r.key),r)}}function Yt(t,e,n){return e=Xt(e),function(t,e){if(e&&("object"==Vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Xt(t).constructor):e.apply(t,n))}function Xt(t){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qt(t,e){return(qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Gt(t,e,n){return(e=Kt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kt(t){var e=function(t,e){if("object"!=Vt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Vt(e)?e:e+""}var $t=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gt(n=Yt(this,e,[t]),"getItemPosition",function(t,e){return{x:R.dateToPixel(e,0,n.props.dayWidth),y:t*n.props.itemheight+n.props.itemheight/2}}),Gt(n,"renderCreateLink",function(){if(n.props.interactiveMode){var t=ct.getTask(n.props.taskToCreate.task.id),e=n.getItemPosition(t.index,t.item.end);return o.a.createElement(Bt,{start:e,onFinishCreateLink:n.props.onFinishCreateLink})}}),Gt(n,"renderChangingTaskLinks",function(){if(n.props.changingTask!=n.state.changingTask){n.state.changingTask=n.props.changingTask;var t=ct.getLinks(n.state.changingTask.item.id);if(!t)return;for(var e=null,r=null,i=null,a={},s={},c=0;c<t.length;c++)e=t[c],(r=ct.getTask(e.link.start))&&(i=ct.getTask(e.link.end))&&(a=n.getItemPosition(r.index,r.item.end),n.state.changingTask.item.id==e.link.start&&(a.x=n.state.changingTask.position.end),s=n.getItemPosition(i.index,i.item.start),n.state.changingTask.item.id==e.link.end&&(s.x=n.state.changingTask.position.start),n.cache[e.index]=o.a.createElement(Rt,{key:-c-1,item:e,start:{x:a.x,y:a.y},end:{x:s.x,y:s.y},isSelected:n.props.selectedItem==e,onSelectItem:n.props.onSelectItem}),n.cache=At(n.cache))}}),n.cache=[],n.state={links:[],data:[],selectedItem:null},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(e,r["Component"]),n=e,(i=[{key:"renderLink",value:function(t,e,n,r){var i=this.getItemPosition(t.index,t.item.end),a=this.getItemPosition(e.index,e.item.start);return o.a.createElement(Rt,{key:r,item:n,start:{x:i.x,y:i.y},end:{x:a.x,y:a.y},isSelected:this.props.selectedItem==n,onSelectItem:this.props.onSelectItem})}},{key:"renderLinks",value:function(){this.cache=[];var t,e={},n={};if(0!=this.state.data.length)for(var r=0;r<this.state.links.length;r++){var o=this.state.links[r];!o&&e[o.id]||((t=ct.getTask(o.start))&&(n=ct.getTask(o.end))?(this.cache.push(this.renderLink(t,n,o,r)),e[o.id]=""):this.cache.push(null))}}},{key:"refreshData",value:function(){this.props.links==this.state.links&&this.props.data==this.state.data&&this.props.dayWidth==this.state.dayWidth&&this.props.selectedItem==this.state.selectedItem||(this.state.selectedItem=this.props.selectedItem,this.state.dayWidth=this.props.dayWidth,this.state.links=this.props.links,this.state.data=this.props.data,this.state.links&&this.state.data&&this.renderLinks())}},{key:"render",value:function(){return this.refreshData(),this.renderChangingTaskLinks(),o.a.createElement("svg",{x:0,y:0,width:"100%",pointerEvents:"none",style:{position:"absolute",top:60,userSelect:"none",height:"100%"}},o.a.createElement("defs",null,o.a.createElement("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"9",markerHeight:"9",orient:"auto-start-reverse"},o.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",strokeLinejoin:"round"}))),o.a.createElement("g",{transform:"matrix(1,0,0,1,".concat(-(this.props.scrollLeft-this.props.nowposition),",").concat(-this.props.scrollTop,")")},this.cache,this.renderCreateLink()))}}])&&Ht(n.prototype,i),a&&Ht(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}();function Jt(t){"@babel/helpers - typeof";return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,re(r.key),r)}}function Zt(t,e,n){return e=te(e),function(t,e){if(e&&("object"==Jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],te(t).constructor):e.apply(t,n))}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ee(t,e){return(ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ne(t,e,n){return(e=re(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function re(t){var e=function(t,e){if("object"!=Jt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=Jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Jt(e)?e:e+""}var oe=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ne(n=Zt(this,e,[t]),"onFocus",function(){n.setState({editing:!0})}),ne(n,"onBlur",function(){n.finishEditing()}),ne(n,"handleKey",function(t){13===(t.keyCode||t.which)&&n.finishEditing()}),ne(n,"finishEditing",function(){n.isFocus=!1,n.setState({editing:!1}),n.props.onChange&&n.props.onChange(n.state.value)}),ne(n,"handleChange",function(t){n.setState({value:t.target.value})}),ne(n,"renderDiv",function(){return o.a.createElement("div",{tabIndex:n.props.index,onClick:n.onFocus,onFocus:n.onFocus,style:{width:"100%"}}," ",n.state.value)}),ne(n,"renderEditor",function(){return o.a.createElement("input",{ref:n.textInputRef,onBlur:n.onBlur,style:{width:"100%",outlineColor:"black",outlineStyle:"oinset"},type:"text",name:"name",value:n.state.value,onKeyUp:n.handleKey,onChange:n.handleChange})}),n.isFocus=!1,n.state={editing:!1,value:n.props.value},n.textInputRef=o.a.createRef(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ee(t,e)}(e,r["Component"]),n=e,(i=[{key:"componentDidUpdate",value:function(t,e){this.textInputRef.current&&!this.isFocus&&(this.textInputRef.current.focus(),this.isFocus=!0)}},{key:"shouldComponentUpdate",value:function(t,e){return t.value!=this.props.value&&(this.state.value=t.value),!0}},{key:"render",value:function(){return this.state.editing?this.renderEditor():this.renderDiv()}}])&&Qt(n.prototype,i),a&&Qt(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}();function ie(t){"@babel/helpers - typeof";return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(n),!0).forEach(function(e){ce(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ce(t,e,n){return(e=fe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fe(r.key),r)}}function pe(t,e,n){return e&&le(t.prototype,e),n&&le(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function fe(t){var e=function(t,e){if("object"!=ie(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ie(e)?e:e+""}function de(t,e,n){return e=he(e),function(t,e){if(e&&("object"==ie(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],he(t).constructor):e.apply(t,n))}function he(t){return(he=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ye(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&me(t,e)}function me(t,e){return(me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}var be=function(t){function e(t){var n;return ue(this,e),ce(n=de(this,e,[t]),"onChange",function(t){n.props.onUpdateTask&&n.props.onUpdateTask(n.props.item,{name:t})}),n.taskViewPortRef=o.a.createRef(),n}return ye(e,r["Component"]),pe(e,[{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"timeLine-side-task-row",style:se(se({},p.values.taskList.task.style),{},{top:this.props.top,height:this.props.itemheight}),onClick:function(e){return t.props.onSelectItem(t.props.item)}},this.props.nonEditable?o.a.createElement("div",{tabIndex:this.props.index,style:{width:"100%"}},this.props.label):o.a.createElement(oe,{value:this.props.label,index:this.props.index,onChange:this.onChange}))}}])}(),ve=function(t){function e(t){var n;return ue(this,e),ce(n=de(this,e,[t]),"doScroll",function(){n.props.onScroll(n.taskViewPortRef.current.scrollTop)}),n}return ye(e,r["Component"]),pe(e,[{key:"getContainerStyle",value:function(t){return{height:t>0?t*this.props.itemheight:10}}},{key:"renderTaskRow",value:function(t){var e=this,n=[],r=ct.groupData(t,this.props.startRow,this.props.endRow+1);return Object.keys(r).forEach(function(t,i){r[t].forEach(function(r){n.push(o.a.createElement(be,{key:i+r.id,index:r.name+i,item:r,label:t,top:i*e.props.itemheight,itemheight:e.props.itemheight,isSelected:e.props.selectedItem==r,onUpdateTask:e.props.onUpdateTask,onSelectItem:e.props.onSelectItem,nonEditable:e.props.nonEditable}))})}),n}},{key:"render",value:function(){var t=this.props.data?this.props.data:[];return this.containerStyle=this.getContainerStyle(t.length),o.a.createElement("div",{className:"timeLine-side"},o.a.createElement("div",{className:"timeLine-side-title",style:p.values.taskList.title.style},o.a.createElement("div",null,p.values.taskList.title.label)),o.a.createElement("div",{ref:this.taskViewPortRef,className:"timeLine-side-task-viewPort",onScroll:this.doScroll},o.a.createElement("div",{className:"timeLine-side-task-container",style:this.containerStyle},this.renderTaskRow(t))))}}])}();function ge(t){"@babel/helpers - typeof";return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Oe(r.key),r)}}function ke(t,e,n){return(e=Oe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oe(t){var e=function(t,e){if("object"!=ge(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ge(e)?e:e+""}var Se=function(t,e,n){return e&&we(t.prototype,e),n&&we(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ke(this,"initialise",function(t,n,r,o){e.nowposition=r,e.daywidth=o,e.setLimits(t,n,r,o),e.loadDataHorizon()}),ke(this,"setStartEnd",function(t,n,r,o){e.nowposition=r,e.daywidth=o,e.needData(t,n)&&(e.setLimits(t,n),e.loadDataHorizon())}),ke(this,"needData",function(t,n){return t<e.lower_data_limit||n>e.upper_data_limit}),ke(this,"setLimits",function(t,n){e.lower_limit=t-1e3,e.lower_data_limit=t-750,e.upper_limit=n+1e3,e.upper_data_limit=n+750}),ke(this,"loadDataHorizon",function(){var t=R.pixelToDate(e.lower_limit,e.nowposition,e.daywidth),n=R.pixelToDate(e.upper_limit,e.nowposition,e.daywidth);e.onHorizonChange(t,n)}),this.lower_limit=0,this.upper_limit=0,this._dataToRender=[]});n(9);function je(t){"@babel/helpers - typeof";return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Me(r.key),r)}}function Te(t,e,n){return e=Ee(e),function(t,e){if(e&&("object"==je(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return function(){return!!t}()}()?Reflect.construct(e,n||[],Ee(t).constructor):e.apply(t,n))}function Ee(t){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Le(t,e){return(Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ce(t,e,n){return(e=Me(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Me(t){var e=function(t,e){if("object"!=je(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==je(e)?e:e+""}var Re=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ce(n=Te(this,e,[t]),"onSize",function(t){n.calculateVerticalScrollVariables(t),n.initialise||(n.dc.initialise(n.state.scrollLeft+n.state.nowposition,n.state.scrollLeft+n.state.nowposition+t.width,n.state.nowposition,n.state.dayWidth),n.initialise=!0),n.setStartEnd();var e=Math.ceil(t.height/n.props.itemheight),r=n.calcNumVisibleDays(t),o=n.calculateStartEndRows(e,n.props.data,n.state.scrollTop);n.setState({numVisibleRows:e,numVisibleDays:r,startRow:o.start,endRow:o.end,size:t})}),Ce(n,"verticalChange",function(t){if(t!=n.state.scrollTop){var e=n.calculateStartEndRows(n.state.numVisibleRows,n.props.data,t);e.start!==n.state.start&&n.setState({scrollTop:t,startRow:e.start,endRow:e.end})}}),Ce(n,"calculateStartEndRows",function(t,e,r){var o=Math.trunc(r/n.props.itemheight);return{start:o,end:o+t>=e.length?e.length:o+t}}),Ce(n,"setStartEnd",function(){n.dc.setStartEnd(n.state.scrollLeft,n.state.scrollLeft+n.state.size.width,n.state.nowposition,n.state.dayWidth)}),Ce(n,"horizontalChange",function(t){var e=n.state.nowposition,r=-1,o=n.state.headerData,i=n.state.startRow,a=n.state.endRow;t>n.pxToScroll?(e=n.state.nowposition-n.pxToScroll,r=0):t<=0?(e=n.state.nowposition+n.pxToScroll,r=n.pxToScroll):r=t;var s=Math.trunc((t-n.state.nowposition)/n.state.dayWidth);a=(i=Math.trunc(n.state.scrollTop/n.props.itemheight))+n.state.numVisibleRows>=n.props.data.length?n.props.data.length-1:i+n.state.numVisibleRows,n.setStartEnd(),n.setState({currentday:s,nowposition:e,headerData:o,scrollLeft:r,startRow:i,endRow:a})}),Ce(n,"calculateVerticalScrollVariables",function(t){n.pxToScroll=(1-t.width/S)*S-1}),Ce(n,"onHorizonChange",function(t,e){n.props.onHorizonChange&&n.props.onHorizonChange(t,e)}),Ce(n,"doMouseDown",function(t){n.dragging=!0,n.draggingPosition=t.clientX}),Ce(n,"doMouseMove",function(t){if(n.dragging){var e=n.draggingPosition-t.clientX;0!==e&&(n.draggingPosition=t.clientX,n.horizontalChange(n.state.scrollLeft+e))}}),Ce(n,"doMouseUp",function(t){n.dragging=!1}),Ce(n,"doMouseLeave",function(t){n.dragging=!1}),Ce(n,"doTouchStart",function(t){n.dragging=!0,n.draggingPosition=t.touches[0].clientX}),Ce(n,"doTouchEnd",function(t){n.dragging=!1}),Ce(n,"doTouchMove",function(t){if(n.dragging){var e=n.draggingPosition-t.touches[0].clientX;0!==e&&(n.draggingPosition=t.touches[0].clientX,n.horizontalChange(n.state.scrollLeft+e))}}),Ce(n,"doTouchCancel",function(t){n.dragging=!1}),Ce(n,"doMouseLeave",function(t){n.dragging=!1}),Ce(n,"onTaskListSizing",function(t){n.setState(function(e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pe(Object(n),!0).forEach(function(e){Ce(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e);return n.sideStyle={width:n.sideStyle.width-t},n})}),Ce(n,"onSelectItem",function(t){n.props.onSelectItem&&t!=n.props.selectedItem&&n.props.onSelectItem(t)}),Ce(n,"onStartCreateLink",function(t,e){n.setState({interactiveMode:!0,taskToCreate:{task:t,position:e}})}),Ce(n,"onFinishCreateLink",function(t,e){n.props.onCreateLink&&t&&n.state.taskToCreate&&n.state.taskToCreate.task.id!=t.id&&n.props.onCreateLink({start:n.state.taskToCreate,end:{task:t,position:e}}),n.setState({interactiveMode:!1,taskToCreate:null})}),Ce(n,"onTaskChanging",function(t){n.setState({changingTask:t})}),Ce(n,"calcNumVisibleDays",function(t){return Math.ceil(t.width/n.state.dayWidth)+O}),Ce(n,"checkNeeeData",function(){if(n.props.data!=n.state.data){n.state.data=n.props.data;var t=n.calculateStartEndRows(n.state.numVisibleRows,n.props.data,n.state.scrollTop);n.state.startRow=t.start,n.state.endRow=t.end,ct.registerData(n.state.data)}n.props.links!=n.state.links&&(n.state.links=n.props.links,ct.registerLinks(n.props.links))}),n.dragging=!1,n.draggingPosition=0,n.dc=new Se,n.dc.onHorizonChange=n.onHorizonChange,n.initialise=!1,n.pxToScroll=1900;var r=n.getDayWidth(n.props.mode);return p.load(n.props.config),n.state={currentday:0,nowposition:0,startRow:0,endRow:10,sideStyle:{width:200},scrollLeft:0,scrollTop:0,numVisibleRows:40,numVisibleDays:60,dayWidth:r,interactiveMode:!1,taskToCreate:null,links:[],mode:n.props.mode?n.props.mode:x,size:{width:1,height:1},changingTask:null},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Le(t,e)}(e,r["Component"]),n=e,(i=[{key:"getDayWidth",value:function(t){switch(t){case j:return 1440;case P:return 480;case x:return 24;case T:return 4;default:return 24}}},{key:"checkMode",value:function(){if(this.props.mode!=this.state.mode&&this.props.mode){this.state.mode=this.props.mode;var t=this.getDayWidth(this.state.mode);this.state.dayWidth=t,this.state.numVisibleDays=this.calcNumVisibleDays(this.state.size);var e=Math.ceil(-this.state.currentday*this.state.dayWidth/this.pxToScroll);this.state.nowposition=e*this.pxToScroll;var n=(this.state.currentday*this.state.dayWidth+this.state.nowposition)%this.pxToScroll;this.state.scrollLeft=n}}},{key:"render",value:function(){return this.checkMode(),this.checkNeeeData(),this.state.size,o.a.createElement("div",{className:"timeLine"},o.a.createElement("div",{className:"timeLine-side-main",style:this.state.sideStyle},o.a.createElement(ve,{ref:this.taskViewPortRef,itemheight:this.props.itemheight,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,selectedItem:this.props.selectedItem,onSelectItem:this.onSelectItem,onUpdateTask:this.props.onUpdateTask,onScroll:this.verticalChange,nonEditable:this.props.nonEditableName}),o.a.createElement(v,{onTaskListSizing:this.onTaskListSizing})),o.a.createElement("div",{className:"timeLine-main"},o.a.createElement(X,{headerData:this.state.headerData,numVisibleDays:this.state.numVisibleDays,currentday:this.state.currentday,nowposition:this.state.nowposition,dayWidth:this.state.dayWidth,mode:this.state.mode,scrollLeft:this.state.scrollLeft}),o.a.createElement(St,{ref:this.DataViewPortRef,scrollLeft:this.state.scrollLeft,scrollTop:this.state.scrollTop,itemheight:this.props.itemheight,nowposition:this.state.nowposition,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,selectedItem:this.props.selectedItem,dayWidth:this.state.dayWidth,onScroll:this.scrollData,onMouseDown:this.doMouseDown,onMouseMove:this.doMouseMove,onMouseUp:this.doMouseUp,onMouseLeave:this.doMouseLeave,onTouchStart:this.doTouchStart,onTouchMove:this.doTouchMove,onTouchEnd:this.doTouchEnd,onTouchCancel:this.doTouchCancel,onSelectItem:this.onSelectItem,onUpdateTask:this.props.onUpdateTask,onTaskChanging:this.onTaskChanging,onStartCreateLink:this.onStartCreateLink,onFinishCreateLink:this.onFinishCreateLink,boundaries:{lower:this.state.scrollLeft,upper:this.state.scrollLeft+this.state.size.width},onSize:this.onSize}),o.a.createElement($t,{scrollLeft:this.state.scrollLeft,scrollTop:this.state.scrollTop,startRow:this.state.startRow,endRow:this.state.endRow,data:this.props.data,nowposition:this.state.nowposition,dayWidth:this.state.dayWidth,interactiveMode:this.state.interactiveMode,taskToCreate:this.state.taskToCreate,onFinishCreateLink:this.onFinishCreateLink,changingTask:this.state.changingTask,selectedItem:this.props.selectedItem,onSelectItem:this.onSelectItem,itemheight:this.props.itemheight,links:this.props.links})))}}])&&xe(n.prototype,i),a&&xe(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}();Re.propTypes={itemheight:a.a.number.isRequired,dayWidth:a.a.number.isRequired,nonEditableName:a.a.bool},Re.defaultProps={itemheight:20,dayWidth:24,nonEditableName:!1};e.default=Re}])});